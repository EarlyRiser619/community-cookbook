<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org/"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:replace="fragments :: head"></head>
<body>
<nav th:replace="fragments :: navigation"></nav>
<br />
<h1 th:text="${title}"></h1>

<form th:action="@{/logout}" method="post">
    <input type="submit" value="Sign Out" />
</form>
<h2 th:inline="text">Welcome <span th:text="${user.name} + ' ' + ${user.lastName}" />!</h2>

<br />

<!--<p th:unless="${user.image}"><h4>Add A Profile Picture</h4></p>-->
<input type="file" onchange="previewFile()"><br />
<img src="" height="200" alt="Set a Profile Picture">

<script>
    function previewFile() {
    var preview = document.querySelector('img');
    var file    = document.querySelector('input[type=file]').files[0];
    var reader  = new FileReader();

    reader.addEventListener("load", function () {
    preview.src = reader.result;
    }, false);

    if (file) {
    reader.readAsDataURL(file);
    }
    }
</script>

<h4>Would you like to <a href="/recipe/add">add </a> a recipe?</h4>
<br />
<table class="table">

    <tr>
        <th>Name</th>
        <th>Source</th>
        <th>Type</th>
        <th>Ingredients</th>
    </tr>

    <tr th:each="recipe : ${user.recipes}">
        <td th:text="${recipe.name}"></td>
        <td th:text="${recipe.source}"></td>
        <td th:text="${recipe.type}"></td>
        <ul th:each="ingredient : ${ingredients}">
            <li th:text="${ingredient}"></li>
        </ul>
    </tr>
</table>

<!--<h5><li th:each="recipe :  ${recipes}" th:text="${recipe.name}"></li></h5>-->

</body>
</html>